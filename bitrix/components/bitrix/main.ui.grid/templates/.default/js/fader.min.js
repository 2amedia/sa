(function(){"use strict";BX.namespace("BX.Grid");BX.Grid.Fader=function(t){this.parent=null;this.table=null;this.container=null;this.init(t)};BX.Grid.Fader.prototype={init:function(t){this.parent=t;this.table=this.parent.getTable();this.container=this.table.parentNode;if(this.parent.getParam("ALLOW_PIN_HEADER")){this.fixedTable=this.parent.getPinHeader().getFixedTable()}this.debounceScrollHandler=BX.debounce(this._onWindowScroll,400,this);BX.bind(window,"resize",BX.proxy(this.toggle,this));BX.bind(window,"scroll",this.debounceScrollHandler);BX.bind(this.container,"scroll",BX.proxy(this.toggle,this));BX.addCustomEvent(window,"Grid::updated",BX.proxy(this.toggle,this));BX.addCustomEvent(window,"Grid::columnResize",BX.proxy(this.toggle,this));BX.bind(this.getEarLeft(),"mouseenter",BX.proxy(this._onMouseoverLeft,this));BX.bind(this.getEarRight(),"mouseenter",BX.proxy(this._onMouseoverRight,this));BX.bind(this.getEarLeft(),"mouseleave",BX.proxy(this.stopScroll,this));BX.bind(this.getEarRight(),"mouseleave",BX.proxy(this.stopScroll,this));this.toggle();this.adjustEarOffset(true)},destroy:function(){BX.unbind(window,"resize",BX.proxy(this.toggle,this));BX.unbind(window,"scroll",this.debounceScrollHandler);BX.unbind(this.container,"scroll",BX.proxy(this.toggle,this));BX.removeCustomEvent(window,"Grid::updated",BX.proxy(this.toggle,this));BX.removeCustomEvent(window,"Grid::columnResize",BX.proxy(this.toggle,this));BX.unbind(this.getEarLeft(),"mouseenter",BX.proxy(this._onMouseoverLeft,this));BX.unbind(this.getEarRight(),"mouseenter",BX.proxy(this._onMouseoverRight,this));BX.unbind(this.getEarLeft(),"mouseleave",BX.proxy(this.stopScroll,this));BX.unbind(this.getEarRight(),"mouseleave",BX.proxy(this.stopScroll,this));this.hideLeftEar();this.hideRightEar();this.stopScroll()},_onMouseoverLeft:function(){this.startScrollByDirection("left")},_onMouseoverRight:function(){this.startScrollByDirection("right")},stopScroll:function(){clearTimeout(this.scrollTimer);clearInterval(this.scrollInterval)},startScrollByDirection:function(t){var i=this.container;var e=i.scrollLeft;var s=this;var o=8;var r=1e3/60/2;this.scrollTimer=setTimeout(function(){s.scrollInterval=setInterval(function(){i.scrollLeft=t=="right"?e+=o:e-=o},r)},100)},getEarLeft:function(){if(!this.earLeft){this.earLeft=BX.Grid.Utils.getByClass(this.parent.getContainer(),this.parent.settings.get("classEarLeft"),true)}return this.earLeft},getEarRight:function(){if(!this.earRight){this.earRight=BX.Grid.Utils.getByClass(this.parent.getContainer(),this.parent.settings.get("classEarRight"),true)}return this.earRight},adjustEarOffset:function(t){if(t){this.windowHeight=BX.height(window);this.tbodyPos=BX.pos(this.table.tBodies[0]);this.headerPos=BX.pos(this.table.tHead)}var i=window.scrollY;if(this.parent.isIE()){i=document.documentElement.scrollTop}var e=i+this.windowHeight-this.tbodyPos.top;var s=i-this.tbodyPos.top;if(e>this.tbodyPos.bottom-this.tbodyPos.top){e=this.tbodyPos.bottom-this.tbodyPos.top}if(s<this.headerPos.height){s=this.headerPos.height}else{e-=s;e+=this.headerPos.height}BX.Grid.Utils.requestAnimationFrame(BX.proxy(function(){if(s!==this.lastPosTop){var t="translate3d(0px, "+s+"px, 0)";this.getEarLeft().style.transform=t;this.getEarRight().style.transform=t}if(e!==this.lastBottomPos){this.getEarLeft().style.height=e+"px";this.getEarRight().style.height=e+"px"}this.lastPosTop=s;this.lastBottomPos=e},this))},_onWindowScroll:function(){this.adjustEarOffset()},hasScroll:function(){return this.table.offsetWidth>this.container.clientWidth},hasScrollLeft:function(){return this.container.scrollLeft>0},hasScrollRight:function(){return this.table.offsetWidth>this.container.scrollLeft+this.container.clientWidth},showLeftEar:function(){BX.addClass(this.container.parentNode,this.parent.settings.get("classFadeContainerLeft"));BX.addClass(this.getEarLeft(),this.parent.settings.get("classShow"))},hideLeftEar:function(){BX.removeClass(this.container.parentNode,this.parent.settings.get("classFadeContainerLeft"));BX.removeClass(this.getEarLeft(),this.parent.settings.get("classShow"))},showRightEar:function(){BX.addClass(this.container.parentNode,this.parent.settings.get("classFadeContainerRight"));BX.addClass(this.getEarRight(),this.parent.settings.get("classShow"))},hideRightEar:function(){BX.removeClass(this.container.parentNode,this.parent.settings.get("classFadeContainerRight"));BX.removeClass(this.getEarRight(),this.parent.settings.get("classShow"))},adjustFixedTablePosition:function(){this.fixedTable.style.transform="translate3d(-"+this.container.scrollLeft+"px, 0px, 0)"},toggle:function(){this.adjustEarOffset(true);this.fixedTable&&this.adjustFixedTablePosition();if(this.hasScroll()){this.hasScrollLeft()?this.showLeftEar():this.hideLeftEar();this.hasScrollRight()?this.showRightEar():this.hideRightEar()}else{this.hideLeftEar();this.hideRightEar()}}}})();
//# sourceMappingURL=fader.map.js
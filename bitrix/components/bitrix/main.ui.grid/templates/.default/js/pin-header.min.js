(function(){"use strict";BX.namespace("BX.Grid");BX.Grid.PinHeader=function(e){this.parent=null;this.fixedTable=null;this.header=null;this.init(e)};BX.Grid.PinHeader.prototype={init:function(e){this.parent=e;this.fixedTable=this.getFixedTable();this.header=this.getHeader();this.headerTop=BX.pos(this.header).top;BX.bind(window,"resize",BX.proxy(this.adjustFixedTablePosition,this));BX.bind(window,"scroll",BX.proxy(this._onScroll,this))},destroy:function(){BX.unbind(window,"resize",BX.proxy(this.adjustFixedTablePosition,this));BX.unbind(window,"scroll",BX.proxy(this._onScroll,this));this.unpinHeader()},getFixedTable:function(){var e;if(!this.fixedTable){e=BX.create("div",{props:{className:"main-grid-fixed-bar main-grid-fixed-top"}});this.fixedTable=BX.create("table",{props:{className:"main-grid-table"}});e.appendChild(this.fixedTable);this.parent.getScrollContainer().parentNode.appendChild(e)}return this.fixedTable},checkHeaderPosition:function(){return this.headerTop<=window.scrollY},getHeader:function(){this.header=this.header||this.parent.getHead();return this.header},pinHeader:function(){if(!this.isPinned()){var e=this.getFixedTable();var i=this.parent.getHead();var t=BX.Grid.Utils.getByTag(i,"th");t.forEach(function(e){var i=e.firstElementChild;if(i){i.style.width=e.clientWidth+"px";e.style.width=e.clientWidth+"px"}});var n=BX.clone(this.header);e.appendChild(n);e.parentNode.style.width=e.parentNode.parentNode.clientWidth+"px";BX.onCustomEvent(window,"Grid::headerPinned",[])}},unpinHeader:function(){if(this.isPinned()){BX.html(this.getFixedTable(),"");BX.onCustomEvent(window,"Grid::headerUnpinned",[])}},isPinned:function(){return this.getFixedTable().children.length},adjustFixedTablePosition:function(){if(this.getFixedTable()){var e=this.parent.getContainer();if(e){var i=e.getBoundingClientRect();var t=i.left;var n=i.width;if(t!==this.lastLeftPos){this.getFixedTable().parentNode.style.left=t+"px"}if(n!==this.lastContainerWidth){this.getFixedTable().parentNode.style.width=n+"px"}this.lastLeftPos=t;this.lastContainerWidth=n}}},_onScroll:function(){this.adjustFixedTablePosition();if(this.checkHeaderPosition()){this.pinHeader()}else{this.unpinHeader()}}}})();
//# sourceMappingURL=pin-header.map.js
(function(){"use strict";BX.namespace("BX.Grid");BX.Grid.UserOptions=function(t,i,n,s){this.options=null;this.actions=null;this.parent=null;this.url=null;this.init(t,i,n,s)};BX.Grid.UserOptions.prototype={init:function(parent,userOptions,userOptionsActions,url){this.url=url;this.parent=parent;try{this.options=eval(userOptions)}catch(err){console.warn("BX.Grid.UserOptions.init: Failed parse user options json string")}try{this.actions=eval(userOptionsActions)}catch(err){console.warn("BX.Grid.UserOptions.init: Failed parse user options actions json string")}},getCurrentViewName:function(){var t=this.getOptions();return"current_view"in t?t.current_view:null},getViewsList:function(){var t=this.getOptions();return"views"in t?t.views:{}},getCurrentOptions:function(){var t=this.getCurrentViewName();var i=this.getViewsList();var n=null;if(t in i){n=i[t]}return n},getUrl:function(t){return BX.util.add_url_param(this.url,{GRID_ID:this.parent.getContainerId(),bxajaxid:this.parent.getAjaxId(),action:t})},getOptions:function(){return this.options||{}},getActions:function(){return this.actions},getAction:function(t){var i=null;try{i=this.getActions()[t]}catch(n){i=null}return i},update:function(t){this.options=t},setColumns:function(t,i){var n=this.getCurrentOptions();if(BX.type.isPlainObject(n)){n.columns=t.join(",");this.save(this.getAction("GRID_SET_COLUMNS"),{columns:n.columns},i)}return this},setColumnsNames:function(t,i){var n={view_id:"default"};if(BX.type.isPlainObject(n)){n.custom_names=t;this.save(this.getAction("SET_CUSTOM_NAMES"),n,i)}return this},setColumnSizes:function(t,i){this.save(this.getAction("GRID_SET_COLUMN_SIZES"),{sizes:t,expand:i})},reset:function(t){this.save(this.getAction("GRID_RESET"),{},t)},setSort:function(t,i,n){if(t&&i){this.save(this.getAction("GRID_SET_SORT"),{by:t,order:i},n)}return this},setPageSize:function(t,i){if(BX.type.isNumber(parseInt(t))){this.save(this.getAction("GRID_SET_PAGE_SIZE"),{pageSize:t},i)}},save:function(t,i,n){var s=this;BX.ajax.post(this.getUrl(t),i,function(t){try{t=JSON.parse(t);if(!t.error){s.update(t);if(BX.type.isFunction(n)){n(t)}BX.onCustomEvent(s.parent.getContainer(),"Grid::optionsChanged",[s.parent])}}catch(i){}})}}})();
//# sourceMappingURL=useroptions.map.js